/**
 * jQuery WebVTT Plugin 0.0.1
 * http://github.com/brainbits/jquery-webvtt
 * Requires jQuery 1.4.2
 *
 * Copyright 2011 Brainbits GmbH.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function(e){function f(a){if(!g.test(a))throw"'"+a+"' doesn't match to the WebVTT timestamp pattern.";var a=g.exec(a),b=a[4]/1E3,b=b+parseInt(a[3],10);a[2]&&(b+=60*a[2]);a[1]&&(b+=3600*a[1]);return b}function i(a){var a=e.trim(a).split(/(?:(?:\r\n|\n){2,})/),b=[],c=[],d=0;do{0===d&&j.test(a[d])&&(d+=2);if(!h.test(a[d]))throw"An error while parsing a WebVTT cue string on cue "+(d+1)+".";c=h.exec(a[d]);b.push({marker:c[1],from:f(c[2]),to:f(c[3]),payload:e("<p/>").text(c[4])});d+=1}while(d<a.length); return b}var g=/^(?:(\d{2,}):)?(\d{2}):(\d{2})[,.](\d{3})$/,h=/^(?:(.*)(?:\r\n|\n))?([\d:,.]+) --\> ([\d:,.]+)(?:\r\n|\n)(.*)$/,j=/^\uFEFF?WEBVTT(?: .*)?/;e.webVtt=function(a,b){var c=e(a),d=e([]);c.data("webvtt")||c.data("webvtt",i(c.html()));"number"!==e.type(b)&&(b=f(b));e.each(c.data("webvtt"),function(a,c){c.from<=b&&c.to>b&&(d=d.add(c.payload))});return d};e.fn.extend({webVtt:function(a){return e.webVtt(this[0],a)}})})(jQuery);